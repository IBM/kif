# -*- mode: makefile -*-

NAME= kif-lib
PACKAGE= kif_lib
DESCRIPTION= A knowledge integration framework based on Wikidata
AUTHOR= IBM
EMAIL= Guilherme.Lima@ibm.com
URL= https://github.com/IBM/kif
URL_SSH= git@github.com:IBM/kif.git

COPYRIGHT= IBM Corp.
COPYRIGHT_START_YEAR= 2023
LICENSE= Apache-2.0

CHECKFAST= ${TOX_SETENV}
COVERAGERC_EXCLUDE_LINES+= <line>MustBeImplementedInSubclass</line>
COVERAGERC_OMIT=
MYPY_OPTIONS=
PYTEST_OPTIONS+= --ignore tests/__init__.py
PYTEST_OPTIONS+= --ignore tests/data/__init__.py
PYTEST_OPTIONS+= --ignore tests/tests.py
TOX_SETENV= SKIP_TEST_STORE_PUBCHEM=1 SKIP_TEST_STORE_SPARQL=1
TOX_PASSENV+= <line>SKIP_TEST_STORE_PUBCHEM</line>
TOX_PASSENV+= <line>SKIP_TEST_STORE_SPARQL</line>

# Set WIKIDATA and PUBCHEM in your local Makefile.
-include Makefile_local.conf
PYTEST_ENV+= PUBCHEM='${PUBCHEM}'
PYTEST_ENV+= WIKIDATA='${WIKIDATA}'

TESTS_MODEL_DESCRIPTOR:= $(wildcard tests/test_model_descriptor_*.py)
TESTS_MODEL_KIF_OBJECT:= tests/test_model_kif_object.py
TESTS_MODEL_OBJECT:= tests/test_model_object.py
TESTS_MODEL_SET:= $(wildcard tests/test_model_*_set.py)
TESTS_MODEL_VALUE:= $(wildcard tests/test_model_value_*.py)

.PHONY: check-model-descriptor
check-model-descriptor:
	${MAKE} check TESTS='${TESTS_MODEL_DESCRIPTOR}'

.PHONY: check-model-kif-object
check-model-kif-object:
	${MAKE} check TESTS='${TESTS_MODEL_KIF_OBJECT}'

.PHONY: check-model-object
check-model-object:
	${MAKE} check TESTS='${TESTS_MODEL_OBJECT}'

.PHONY: check-model-set
check-model-set:
	${MAKE} check TESTS='${TESTS_MODEL_SET}'

.PHONY: check-model-value
check-model-value:
	${MAKE} check TESTS='${TESTS_MODEL_VALUE}'
